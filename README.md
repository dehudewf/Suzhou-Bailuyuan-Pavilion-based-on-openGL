# Suzhou-Bailuyuan-Pavilion-based-on-openGL

## 一、项目概述
本项目基于OpenGL技术开发沉浸式3D白鹭园场景，是计算机图形学课程（CPT-205）的实践成果。项目核心目标是综合运用计算机图形学理论与OpenGL函数，还原包含雅致亭子、广阔海洋、沙滩、茂密林地及复古桥梁等元素的自然景观，viewport尺寸设定为高500像素、宽700像素。通过整合分层建模、光照材质配置、纹理映射等关键技术，搭配丰富的交互与动画功能，打造出兼具视觉美感与操作体验的3D场景，同时通过多重采样抗锯齿（MSAA）技术优化曲线与圆形的显示效果，解决边缘锯齿问题。

## 二、关键技术与实现
### （一）视图与投影系统
采用`gluLookAt`函数设定相机姿态，相机位置与观察点动态关联，观察点的x、z坐标通过三角函数计算，支持相机围绕场景水平旋转。通过“w”“s”键可垂直调整观察点高度，“a”“d”键能控制相机左右转向。投影方面使用`gluPerspective`函数实现透视投影，90度视场角搭配100至6000单位的近远裁剪面，模拟人眼视觉效果，强化场景深度感知。

### （二）核心场景元素设计
1. **复古桥梁**：以长方体构建桥身，通过循环生成十个连续长方体形成桥面，圆柱支柱提供结构支撑。桥两端设有圆柱形固定件，两侧护栏采用木质纹理，由首尾圆柱、中间水平圆柱、垂直立柱及高位水平柱组成，桥面铺设三组不同样式的石板（长方体结构），兼顾实用性与美观性。
2. **分层结构亭子**：采用分层建模技术，包含天花板、座椅、纪念碑、围栏、信息板及亭灯等部件。天花板为六边形结构，木纹纹理模拟木梁，顶部应用石材纹理，通过旋转实现径向对称，梁体沿x轴间隔19单位排列且长度向外递减；亭灯由多段圆柱组成，根据时间变量控制发光状态，夜间呈现黄色发光效果，搭配黑橙配色的细节装饰；围栏通过60度迭代旋转形成对称布局，纪念碑采用石材质感的基座与立柱结构。
3. **动态海洋**：基于纹理网格生成带高光效果的海洋场景，通过距离中心的远近调整颜色强度，搭配昼夜差异化配色方案。每个海洋单元以纹理四边形渲染，结合动画逻辑实现海浪翻滚的动态效果。
4. **昼夜切换天空与云朵**：天空盒由六个纹理四边形组成，根据时间变量切换不同纹理，实现晨、午、晚的氛围变化。云朵通过多个不同尺寸的球体组合构建，颜色随时间调整，夜间色调加深，模拟真实云层的蓬松质感与漂浮效果。
5. **草坪与林地系统**：同样采用分层建模，包含座椅、街灯与森林。座椅的座椅面和靠背使用木纹纹理，基座为石材质感，腿部与靠背连接处采用黑色石纹，靠背经旋转呈现倾斜角度；树木 foliage 分三层渲染，通过纹理绑定与颜色深浅差异模拟自然生长状态，底层叶片深绿、中层中绿、顶层浅绿，围绕中心轴60度迭代旋转排列；街灯由多个长方体组成，夜间根据时间变量触发发光效果。

## 三、动画与交互功能
### （一）动态效果实现
通过`myIdleFunc`函数驱动场景动画：树木借助`treedegree`变量模拟随风摇摆，`treedir`变量控制摆动方向反转，实现自然晃动；云朵通过更新`cloudpos`数组的x坐标实现漂浮效果，超出场景边缘后自动环绕至另一侧；海浪通过调整`spindriftloc`变量改变纹理位置，模拟持续滚动的动态水面。

### （二）用户交互设计
支持右键呼出功能菜单，搭配键盘快捷键实现多样化操作，“Q”键可直接退出程序。菜单系统提供场景切换、参数调整等选项，相机控制与时间切换等功能可通过快捷键快速触发，提升操作便捷性。

## 四、光照与材质系统
### （一）时段化光照模型
设计三种光照模型对应不同时段：早晨采用强白光模拟明亮环境，下午以柔和黄光呈现日落色调，傍晚用紫红色光呼应晚霞，营造温暖静谧氛围。系统整合四种可调光源：全局环境光提供基础照明，平行光模拟太阳周期且支持开关，点光源位于太阳位置并随时间变色且强度衰减，聚光灯模拟云层遮挡下的阳光效果，通过两个聚光灯区分直射与间接光照区域。

### （二）材质属性配置
根据物体特性分配差异化材质参数，涵盖环境光（GL_AMBIENT）、漫反射（GL_DIFFUSE）、高光指数（GL_SHININESS）、镜面反射（GL_SPECULAR）及发射光（GL_EMISSION）等参数。例如木材呈现粗糙纹理质感，玻璃突出细腻反射效果，通过精准参数配置提升物体真实度。

## 五、纹理映射技术
### （一）对象纹理处理
平面物体通过`glTexCoord2f()`函数将纹理坐标与顶点绑定，实现纹理映射；球体、圆柱等曲面物体则结合`gluQuadricTexture`函数适配OpenGL纹理映射机制，确保纹理贴合复杂几何表面。

### （二）关键纹理参数
采用`glTexParameterf()`函数配置纹理参数：GL_REPEAT参数通过超1纹理坐标实现纹理平铺，适用于海岸线、草坪等大尺寸物体的低分辨率纹理应用；GL_CLAMP参数实现纹理自适应贴合，配合`gluQuadricTexture`函数完成圆柱、球体等形状的纹理绑定。

